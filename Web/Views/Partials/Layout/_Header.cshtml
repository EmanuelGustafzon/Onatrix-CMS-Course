@inherits Umbraco.Cms.Web.Common.Views.UmbracoViewPage
@using Umbraco.Cms.Core.Models.PublishedContent
@using Umbraco.Cms.Core.PublishedCache
@using Umbraco.Cms.Core.Routing
@using Umbraco.Cms.Core.Services.Navigation

@inject IVariationContextAccessor VariationContextAccessor
@inject IPublishedContentCache PublishedContentCache
@inject IDocumentNavigationQueryService DocumentNavigationQueryService
@inject IPublishedValueFallback PublishedValueFallback
@inject IPublishedUrlProvider PublishedUrlProvider

@{
    var contentRoot = Umbraco.ContentAtRoot();
    var siteSettings = contentRoot.OfType<SiteSettings>().FirstOrDefault();

    var logo = siteSettings?.Logo?.Url();
    var siteName = siteSettings?.SiteName ?? "";

    var selection = Model.Root().Children().Where(x => x.IsVisible(PublishedValueFallback)).ToArray(); 
}

<header class="flex justify-between items-center py-4 px-4 md:px-36">
    <a href="/">
        <img class="w-36 h-12" src="@logo" alt="siteName" />
    </a>
    <div>
        <button onclick="toggleNav()" class="md:hidden">
            <i class="bi bi-list text-primary font-bold text-2xl"></i>
        </button>
        
        <nav id="nav" class="gap-4 hidden flex flex-col absolute right-4 w-36 font-bold text-primary bg-white-100 p-4 rounded-sm
                             md:flex md:relative md:flex-row md:bg-white">
            @if (selection?.Length > 0)
            {
                @foreach (var item in selection)
                {
                    <div class="@(item.IsAncestorOrSelf(Model) ? "current" : null)">
                        <a href="@item.Url(PublishedUrlProvider)">@item.Name</a>
                    </div>
                }
            }
        </nav>
    </div>
    <div class="hidden md:flex gap-2">
        <input class="w-36 bg-white-100 rounded-sm border border-gray-100 focus:ring-2 focus:ring-primary focus:outline-none " type="text" name="searchQuery" value="" />
        <i class="bi bi-search"></i>
        
    </div>
</header>

<script>
    let navIsOpen = false;
    function toggleNav() {
        navIsOpen = !navIsOpen;
        const nav = document.getElementById("nav");
        if(navIsOpen) {
            nav.classList.remove('hidden')
        } else {
            nav.classList.add('hidden')
        }
    }
</script>